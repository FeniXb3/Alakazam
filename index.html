<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="style.css">
    </head>
    <body>
        <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>

        <button id="redraw">Redraw</button>
        <button id="clear">Clear</button>
        Here is one mermaid diagram:
        <div id="output"></div>

        
        <textarea id="flowchart-code-preview"></textarea>

        <script type="module">
            import {Flowchart} from './alakazam.js';

            const flowchart = new Flowchart();
            flowchart.prepare();
            const redrawButton = document.getElementById('redraw');
            const clearButton = document.getElementById('clear');
            const output = document.getElementById('output');
            const previewContainer = document.getElementById('flowchart-code-preview');

            redrawButton.addEventListener('click', () =>{
                const flowchartCode = flowchart.generateCode();
                mermaid.render('theGraph', flowchartCode, function(svgCode) {
                    output.innerHTML = svgCode;
                });

                // output.innerHTML = flowchartCode;
                previewContainer.innerText = flowchartCode;
                mermaid.initialize({ startOnLoad: true });
            });

            clearButton.addEventListener('click', () =>{
                output.innerHTML = '';
               previewContainer.innerText = ''; 
            });
            
        </script>
       
    </body>
</html>